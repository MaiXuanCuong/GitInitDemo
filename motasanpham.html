<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html {
        background: url(https://anhdep123.com/wp-content/uploads/2020/05/h%C3%ACnh-n%E1%BB%81n-m%C3%A1y-t%C3%ADnh-%C4%91%E1%BA%B9p-2018.jpg);
        background-size: cover;
      }
      div {
        text-align: center;
      }
      h2 {
        text-align: center;
        color: rgb(9, 9, 9);
      }
      #newProduct,
      #motasp,
      #timkiem {
        background-color: black;
        color: red;
        border-radius: 20px/20px;
      }
      #addd,
      #timkiem1,
      #hienthi,
      #reset1,
      #delete1 {
        background-color: rgb(246, 161, 201);
        border-radius: 20px/20px;
      }
      #prd {
        background-color: #00ffff;
        border-radius: 10px/10px;
      }
      #csmota,
      #cst,
      #csmt {
        background-color: rgb(247, 110, 245);
        border-radius: 8px/8px;
      }
      bang {
        background-color: rgb(69, 232, 69);
      }
      span {
        background-color: rgb(69, 232, 69);
      }
      #bangg {
        text-align: center;

        /* margin-left: 100px; */
        background-color: rgb(255, 99, 9);
        border-radius: 10px/10px;
      }
      #edit,
      #dele {
        /* margin-left: 180px; */
        text-align: center;

        border-radius: 20px/20px;
      }
      table,
      #td1 {
        /* margin-left: 100px; */
        text-align: center;

        background-color: rgb(203, 246, 62);
        border: solid 0px rgb(245, 23, 7);
        border-radius: 10px/10px;
      }
      #texta {
        background-color: #00ffff;
        border-radius: 10px/10px;
      }
    </style>
  </head>
  <body>
    <form>
      <h2><b>TRÌNH QUẢN LÝ DANH SÁCH SẢN PHẨM</b></h2>

      <div>
        <input type="text" placeholder="Nhập sản phẩm mới" id="newProduct" />
        <input
          id="addd"
          type="button"
          value="Thêm Sản Phẩm"
          onclick="them_sp();"
        />

        <input
          id="delete1"
          type="button"
          value="Xóa Tất cả sản phẩm"
          onclick="xoaall();"
        />
        <br />
        <br />
        <input type="textarea" placeholder="Nhập mô tả sản phẩm" id="motasp" />
        <input
          id="reset1"
          type="reset"
          value="Làm Mới Nội Dung Đang Nhập"
        /><br /><br />
        <input type="search" placeholder="Kiểm tra sản phẩm" id="timkiem" />
        <input
          id="timkiem1"
          type="button"
          value="Kiểm Tra Sản Phẩm"
          onclick="timkiem_sp();"
        />
        <input
          id="hienthi"
          type="button"
          value="Hiển Thị Tất Cả Sản Phẩm"
          onclick="ht_sp();"
        />

        <h2><b>Danh sánh tất cả sản phẩm</b></h2>
      </div>

      <table id="bangg" style="width: 1500px">
        <tr style="text-align: right">
          <td style="text-align: center" width="500px"><b>Tên sản phẩm</b></td>
          <td style="text-align: center" width="550px">
            <b>Mô tả sản phẩm</b>
          </td>
          <td style="text-align: center" width="300px">
            <b>Chỉnh sửa sản phẩm</b>
          </td>
          <td style="text-align: center" width="150px"><b>Xóa sản phẩm</b></td>
        </tr>
      </table>

      <br />
      <hr />
    </form>
    <span id="bang1"></span>
    <script>
      var product = [];
      var motasp = [];
      var index;
      function ht_sp() {
        return location.reload();
      }
      function timkiem_sp() {
        var timkk = product.includes(document.getElementById("timkiem").value);
        if (timkk) {
          for (var k = 0; k < product.length; k++) {
            if (document.getElementById("timkiem").value == product[k]) {
              let a;
              a =
                "<table border='' cellspacing='' cellpadding='' width='1500px'>";
              a +=
                "<td style='text-align:center' id='prd' width='500px'>" +
                product[k] +
                "</td>";
              a +=
                "<td style='text-align:center' id='texta' width='700px' height='50 px' >" +
                motasp[k] +
                " </td>";
              a +=
                "<td style='text-align:center' id='td1' width='100px'> <input id='csmota' type='button' value='Chỉnh Sửa Mô tả' onclick='chinhsuamt(" +
                k +
                ")' ></td>";
              a +=
                "<td style='text-align:center' id='td1' width='150px'> <input  id='cst' type='button' value='Chỉnh Sửa Tên' onclick='edit(" +
                k +
                ")' ></td>";
              a +=
                "<td style='text-align:center' id='td1' width='150px'> <input  id='csmt' type='button' value='Xóa Sản Phẩm' onclick='dele(" +
                k +
                ")'>(" +
                (k + 1) +
                ")</td>";
              a = a + "</tr>";

              a = a + "</table>";
              document.getElementById("bang1").innerHTML = a;
            }
          }
        } else {
          alert(
            "Sản phẩm " +
              "'" +
              document.getElementById("timkiem").value +
              "'" +
              " không tồn tại trong danh sách"
          );
        }
      }
      function chinhsuamt(index) {
        var newmota = prompt("Nhập lại mô tả sản phẩm");
        if (newmota) {
          motasp[index] = newmota;
          bang(product);
        } else {
          motasp[index] = "";
        }
      }
      function edit(index) {
        var newname = prompt("Nhập lại tên sản phẩm");
        if (newname) {
          if (!product.includes(newname)) {
            product[index] = newname;
            bang(product);
          } else {
            product[index] = "";
            alert(
              "CẢNH BÁO: Sản Phẩm: " +
                "'" +
                newname +
                "'" +
                " Đã Tồn Tại Vui Lòng Đặt Tên Khác"
            );
          }
        } else {
          product[index] = "";
        }
      }
      function them_sp() {
        var add = document.getElementById("newProduct").value;
        var mota = document.getElementById("motasp").value;
        if (add != "") {
          if (!product.includes(add)) {
            product.push(add);
            motasp.push(mota);
            bang(product);
            document.getElementById("newProduct").value = "";
            document.getElementById("motasp").value = "";
          } else {
            alert(
              "CẢNH BÁO: Sản Phẩm: " +
                "'" +
                add +
                "'" +
                " Đã Tồn Tại Vui Lòng Đặt Tên Khác"
            );
          }
        } else {
          alert(" CẢNG BÁO: Tên Sản Phẩm Không Được Để Trống ");
        }
      }
      function bang(product) {
        let a, i;
        a = "<table border='' cellspacing='' cellpadding='' width='1500px'>";
        for (i = 0; i < product.length; i++) {
          // a = a + "<td>";
          a +=
            "<td style='text-align:center' id='prd'  width='500px'>" +
            product[i] +
            "</td>";
          a +=
            "<td style='text-align:center' id='texta' width='700px' height='50 px' >" +
            motasp[i] +
            " </td>";
          a +=
            "<td style='text-align:center' id='td1' width='100px'> <input id='csmota' type='button' value='Chỉnh Sửa Mô tả' onclick='chinhsuamt(" +
            i +
            ")' ></td>";
          a +=
            "<td style='text-align:center' id='td1' width='150px'> <input  id='cst' type='button' value='Chỉnh Sửa Tên' onclick='edit(" +
            i +
            ")' ></td>";
          a +=
            "<td style='text-align:center' id='td1' width='150px'> <input  id='csmt' type='button' value='Xóa Sản Phẩm' onclick='dele(" +
            i +
            ")'>(" +
            (i + 1) +
            ")</td>";
          a = a + "</tr>";
        }
        a = a + "</table>";
        document.getElementById("bang1").innerHTML = a;
        localStorage.setItem("product", JSON.stringify(product));
        localStorage.setItem("motasp", JSON.stringify(motasp));
      }
      function dele(index) {
        var xacnhan = confirm("Bạn có muốn xóa sản phẩm");
        if (xacnhan) {
          product.splice(index, 1);
          motasp.splice(index, 1);
          bang(product);
        }
      }
      function xoaall(index) {
        var xacnhan1 = confirm("Bạn có muốn xóa tất cả sản phẩm");
        if (xacnhan1) {
          product.splice(index, product.length);
          motasp.splice(index, motasp.length);
          bang(product);
        }
      }
      var motasp = localStorage.getItem("motasp");
      if (!motasp) {
        motasp = [];
      } else {
        motasp = JSON.parse(motasp);
      }
      var product = localStorage.getItem("product");
      if (!product) {
        product = [];
      } else {
        product = JSON.parse(product);
      }
      bang(product);
    </script>
  </body>
</html>
